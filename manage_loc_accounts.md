# Managing Local Accounts in Linux

You can add users by using `sudo useradd new_user`, which will add a group called 'john' and a /home/john. Their default shell will be /bin/bash. All /etc are copied to /home/john. You can see the default configuration for useradd by pairing it with `--defaults`. To see other defaults of account creation see `cat /etc/login.defs`. To add passwords to accounts you use `sudo passwd account`, and to delete an account you use `sudo userdel john`. However, the home directory won't be kept, unless we add `sudo userdel -r account`. To change defaukts for account creation you can use ` sudo useradd -s /bin/othershell -d /home/otherdirectory/ account`. The credentials are stored in /etc/passwd, and you can see with cat. The results would show account id, group id, home directory and login shell. To specify the id number you can use `sudo useradd -u 1100 smith`. The `id` command shows the account details, if only user you use `whoami`. To add a system user account you use `sudo useradd --system sysacc`. The numeric ids of system are <1000, while users are 1000>. The system accounts are mainly for programs such as databases, while the users are for people. 

To change already created account parameters, you can use `usermod`. For example to change default home: `sudo usermod -d /home/otherdirectory -m john`. To change names of users you can use the same command with -l abd the shell with -s. To disable accounts without deleting you can use `-L` option to lock account, and to unlck you can use `-U`. You can also expire accounts using `-E` + date yyyy-mm-dd. To remove date use "". We can use also password expiration dates. To immediately expire `sudo chage --lastday 0 account` or `sudo chage -d 0 account`. next login will have to change password. To cancel this we can replace 0 by `-1` and to force the user to change password you can use `sudo chage -M 30 account`. you can also set warning for a user to change passwords using `-W`. To ensure never expiring password we can set the `-M` to `-1`. To see all this password related information you use the `-l` option. `userdel` and `groupdel` do just that, but 'groupdel cant remove primary groups, so you'd have to ensure it's not a primary group. 

Groups are good measure to ensure only the relevant users have access to specific files, and to easily controll permissions access to said files. There are other types of groups such as the WHEEL group, which are sudo users and the docker group which is the one that manages docker containers. Users can belong to multiple groups, but there is a primary group, different from the login group. 

`groupadd` is a command that adds groups. `gpasswd` is used mostly for adding `-a` and removing `-d` users from groups, syntax is `user group`. `groups` shows the groups of a user. To change user primary login group, you can use `sudo usermod -g developers account`. Users can have only one primary group 'g' (preferable to use --gid to avoid confusion) and secondary 'G'. To rename groups you can use `sudo groupmod --new-name new_name old_name` (-n is short command). 

